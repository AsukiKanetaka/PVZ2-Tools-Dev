<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body background="./PVZ2GRIDITEMS_files/bg.png" style="background-repeat: no-repeat;">
    <div id="gridDiv"><div style="width: 396px; height: 51px;"><canvas id="0x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="1x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="2x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="3x0" style="width: 44px; height:"" 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="4x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="5x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="6x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="7x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="8x0" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas></div><div style="width: 396px; height: 51px;"><canvas id="0x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="1x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="2x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="3x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="4x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="5x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="6x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="7x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="8x1" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></div><div style="width: 400px; height: 51px;"><canvas id="0x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="1x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="2x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="3x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="4x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="5x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="6x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="7x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="8x2" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas></div><div style="width: 400px; height: 51px;"><canvas id="0x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="1x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="2x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="3x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="4x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="5x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="6x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="7x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="8x3" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas></div></canvas></div><div style="width: 600px; height: 51px;"><canvas id="0x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="1x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="2x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="3x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="4x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="5x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="6x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="7x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><canvas id="8x4" style="width: 44px; height: 51px; outline: rgba(0, 0, 0, 0.2) solid 0.5px;"></canvas><img src="./PVZ2GRIDITEMS_files/Eraser.png" id="47" onclick="selectSprite(event)" style="margin-left: 15px;"></div>
</style></div>
<div style="margin-top: 15px">
        <img src="./PVZ2GRIDITEMS_files/powertile_alpha.png" id="6" onclick="selectSprite(event)" style="outline: blue solid 0.5px;">
        <img src="./PVZ2GRIDITEMS_files/powertile_beta.png" id="2" onclick="selectSprite(event)">
        <img src="./PVZ2GRIDITEMS_files/powertile_gamma.png" id="3" onclick="selectSprite(event)">
        <img src="./PVZ2GRIDITEMS_files/powertile_delta.png" id="4" onclick="selectSprite(event)">
        <img src="./PVZ2GRIDITEMS_files/powertile_epsilon.png" id="5" onclick="selectSprite(event)">
    </div>
<div>
    <div style="margin-top: 15px">
        <p id="p1" class="paragraph1"></p><p id="p2" class="paragraph1">
    </p></div>
    <style type="text/css">
textarea {
 width: 410px; height: 250px; font-size: 12px; font-family: Verdana, Arial, Helvetica, sans-serif;
}
	</style>
    <textarea id="xml" rows="20" cols="50"></textarea> 
     <p> </p>
    <button onclick="CompileLevelXML()">Finished</button>
     <p> </p>
    <textarea id="output" rows="10" cols="50"></textarea> 
        <script type="text/javascript">
        var version = 1.0;
        var eraser = 47;
        var powertile_alpha = 6;
        var powertile_beta = 2;
        var powertile_gamma = 3;
        var powertile_delta = 4;
        var powertile_epsilon = 5;
        document.getElementById('output').style.display = "none";	
        document.getElementById("xml").value = "";
		document.getElementById("output").value = "###Don't forget to add### \"RTID\(Gravestones\@CurrentLevel\)\"\n\n";
        var mouseOverSprite = document.createElement("img");
            mouseOverSprite.style.display="block";
            mouseOverSprite.style.position = "absolute";
            mouseOverSprite.style.zIndex = "-1";
        document.body.insertBefore(mouseOverSprite,document.body.firstChild);
        document.addEventListener("mousemove",mouseMoveFunction);
        var lastGridId = null;

        function mouseMoveFunction(e){
            var p1 = document.getElementById("p1");
            if(e.target.nodeName == "CANVAS"){
                p1.innerHTML = " Grid ID: "+e.target.id

                if(e.target.id == lastGridId){
                    return;
                }
                lastGridId = e.target.id;
                mouseOverSprite.style.visibility ="visible";
                mouseOverSprite.style.top = e.target.offsetTop+"px";
                mouseOverSprite.style.left = e.target.offsetLeft+"px";
            }
            else{
                mouseOverSprite.style.visibility ="hidden";
            }
        }
        document.addEventListener("click",mouseClickFunction);
        function mouseClickFunction(e){
            if(mouseOverSprite.style.visibility == "visible" && e.target.nodeName == "CANVAS"  && selectedSpriteId != eraser)
            {

                var targetRect = e.target.getBoundingClientRect();
                var a = e.target.id;
                console.log(a);
                var x = a.charAt(0);
                console.log(x);
                var b = e.target.id;
                console.log(b);
                var y = b.charAt(2);
                console.log(y);
                document.getElementById("xml").value += (document.getElementById("xml").value.endsWith("}") ? ",\n" : "")
                console.log(selectedSpriteId);
                switch(selectedSpriteId){
                    case 6:
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"alpha\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                    break;

                    case "2":
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"beta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                    break;

                    case "3":
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"gamma\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                    break;

                    case "4":
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"delta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                    break;

                    case "5":
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"epsilon\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                    break;
                }
                /*if(selectedSpriteId = powertile_alpha) {
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"alpha\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}"
                } else if(selectedSpriteId = powertile_beta) {
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"beta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}"
                } else if(selectedSpriteId = powertile_gamma){
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"gamma\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}"
                } else if(selectedSpriteId = powertile_delta){
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"delta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}"
                } else {
                    document.getElementById("xml").value += "                    \{\n                        \"Group\"\: \"epsilon\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}"
                }*/
                var newImg = document.createElement("img");
                newImg.src = mouseOverSprite.src;
                newImg.style.position = "absolute";
                newImg.style.left = targetRect.x+"px";
                newImg.style.top = targetRect.y+"px";
                newImg.style.zIndex = -1;
                newImg.className = "newImg";
                newImg.addEventListener("click",function(){
                if(selectedSpriteId == eraser){
                        var a = e.target.id;
                        console.log(a);
                        var x = a.charAt(0);
                        console.log(x);
                        var b = e.target.id;
                        console.log(b);
                        var y = b.charAt(2);
                        console.log(y);
                        var pa = document.getElementById("xml").value.indexOf("                    \{\n                        \"Group\"\: \"alpha\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}");
                        var pb = document.getElementById("xml").value.indexOf("                    \{\n                        \"Group\"\: \"beta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}");
                        var pg = document.getElementById("xml").value.indexOf("                    \{\n                        \"Group\"\: \"gamma\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}");
                        var pd = document.getElementById("xml").value.indexOf("                    \{\n                        \"Group\"\: \"delta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}");
                        var pe = document.getElementById("xml").value.indexOf("                    \{\n                        \"Group\"\: \"epsilon\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}");
                        if(pa != -1){
                            victim = "\n                    \{\n                        \"Group\"\: \"alpha\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                        }
                        if(pb != -1){
                            victim = "\n                    \{\n                        \"Group\"\: \"beta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                        }
                        if(pg != -1){
                            victim = "\n                    \{\n                        \"Group\"\: \"gamma\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                        }
                        if(pd != -1){
                            victim = "\n                    \{\n                        \"Group\"\: \"delta\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                        }
                        if(pe != -1){
                            victim = "\n                    \{\n                        \"Group\"\: \"epsilon\",\n                        \"Location\"\: \{\n                            \"mX\"\: " + x +",\n                            \"mY\"\: " + y + "\n                        \},\n                        \"PropagationDelay\"\: 0.2\n                    \}";
                        }
             			//victim = "\n                    {\n                        \"GridX\"\: " + x + ",\n                        \"GridY\"\: " + y + ",\n                        \"TypeName\"\: \""+ this.src.substring(this.src.lastIndexOf('/')+1).split('.')[0] + "\"\n                    }";
             			console.log(victim);
                        console.log(e);
                		xml = document.getElementById("xml").value;
                		document.getElementById("xml").value = xml.substr(0,xml.indexOf(victim)) + xml.substr(xml.indexOf(victim) + victim.length + 1, xml.length);
               		    this.remove();
               		    xml3 = document.getElementById("xml").value;
               		    xml4 = xml3.slice(0, -1);
               		    if(xml3.endsWith(",")){
						console.log(xml4);
               		    	document.getElementById("xml").value = xml4;
               		    }
             	   }
          		});
                document.body.appendChild(newImg);
                if(allAddedItems[e.target.id]==null)
                    allAddedItems[e.target.id] = new Array(newImg);
                else
                    allAddedItems[e.target.id].push(newImg); 
            }
        }
        var allAddedItems = new Array();
        var selectedSpriteId = 1;
        document.getElementById(selectedSpriteId).style.outline=".5px solid blue";
        mouseOverSprite.src = document.getElementById(selectedSpriteId).src;

        function selectSprite(e){
            document.getElementById(selectedSpriteId).style.outline="";
            e.currentTarget.style.outline = ".5px solid blue";
            selectedSpriteId = e.currentTarget.id;
            mouseOverSprite.src = e.currentTarget.src;
            var canvases = document.getElementsByClassName('newImg');
            if(selectedSpriteId == eraser){
            	mouseOverSprite.style.pointerEvents="none";
            	//document.getElementById('gridDiv').style.pointerEvents="none";
            	for(i=0;i<canvases.length;i++){
            		canvases[i].style.zIndex=1;
            	}
            } else {
            	mouseOverSprite.style.pointerEvents="";
            	for(i=0;i<canvases.length;i++){
            		canvases[i].style.zIndex=-1;
            	}
            }
        }
function toggleoutputvisibility() {
        var display = document.getElementById('output').style.display;
        if(display == "none")
              document.getElementById('output').style.display = "block";
     }
        function CompileLevelXML() {
    var str = document.getElementById("xml").value;
    toggleoutputvisibility();
        document.getElementById("output").value += "        \{\n            \"aliases\"\: \[\n                \"FutureLinkedTileGroups\"\n            \],\n            \"objclass\"\: \"PowerTileProperties\",\n            \"objdata\"\: \{\n                \"LinkedTiles\"\: \[\n";
        document.getElementById("output").value += str;
        document.getElementById("output").value += "\n                \]\n            \}\n        \},";
        console.log(allAddedItems);
		}
//Asuki says Hai!
    </script>
    <style>
        p {
            color: Blue;
        }
        .paragraph1 {
            font-size: 12px;
             font-family: Verdana, Arial, Helvetica, sans-serif;
            line-height: 2px;
        }
        .paragraph2 {
            font-size: 13px;
             font-family: Verdana, Arial, Helvetica, sans-serif;
        }
    </style>
</body></html>
